PgToolkit from PostgreSQL-Consulting.com

PgToolkit is a set of scripts and instructions for PostgreSQL database
management. Initially it was an internal stuff of the
PostgreSQL-Consulting.com company. However, some time ago we decided
to share our experience with public and started to make a box version
from this.

There are two ways of deploying and using the tools. The first and the
easiest one is to get the latest version of the autonomous scripts
archive from the PgToolkit project's site on Google Code
http://code.google.com/p/pgtoolkit/. Unpack it on the destination
machine and just use. These scripts are packed with all the required
dependencies so you need the Perl interpreter installed only. Another
way is to checkout the source code from the mentioned above site. All
the scripts you will find in the bin/ directory. Before using any of
them the PERL5LIB environment variable must be set to point to the
lib/ directory.

To get more information about any tool run it with the --man option.

Currently there is the only tool we have prepared for publishing:

- pgcompactor - a PostgreSQL table bloat reducing tool.

We have not adapted any instructions to the publication yet but they
are comming soon.

Release v1.0beta2:

- fixed the error when -d and/or -t are specified
- fixed the bug with conforming strings
- fixed the unicode name index altering bug
- fixed the error output recognition in the psql adapter
- prevented processing from interupting after deadlocks
- fixed the "can not get bloat statistics" warning on empty tables
- disabled printing uncompleted statistics if table is processed
- set synchronous_commit to off and session_replication_role to
  replica on the database level.

Release v1.0beta1:

- (!) renamed pg_compactor tool to pgcompactor 
- added --dry-run
- added fillfactor to all the statistics calculations
- fixed the reindex duration bug
- got rid of the schema as a middle level
- tables are sorted by size inside their database
- added the ability of reindexing internal indexes like PRIMARY KEY
  and UNIQUE
- added the reindexing necessity check based on the pgstattuple
  statistics
- a lot of minor changes.

Release v1.0alpha7:

- reworked reindex to be performed in any case when a table has been
  compacted or it has not (after the last iteration)
- fixed the query for testing "always" and "replica" triggers
- refactored the logic of bloat statistics to lower the amount of
  heavy pgstattuple calls
- fixed the final statistics
- added bloat statistics requests duration.

Release v1.0alpha6:

- refactored out useless resource consuming pgstattuple calls
- added DEBUG0 and DEBUG1 logging levels and applied to SQL queries
  logging
- turned off server side prepares for DBI drivers
- made some minor changes.

Release v1.0alpha5

Release v1.0alpha4

Release v1.0alpha3

Release v1.0alpha2

Release v1.0alpha1

TODO License boilerplate


